<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hotline: Global Chaos Simulator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{background:#0b0f1a;color:white;font-family:Arial;margin:0;padding:0}
#container{display:flex;justify-content:center;gap:20px;padding:20px}
#game{width:650px;text-align:center}
#sidePanel{width:500px;background:#121a2b;padding:15px;border-radius:15px;display:flex;flex-direction:column;gap:15px;}
button{padding:10px;margin:5px;border:none;border-radius:10px;cursor:pointer;width:100%}
#bar{height:28px;background:#333;border-radius:20px;overflow:hidden;margin:15px 0}
#tension{height:100%;background:red;width:50%}
.card{background:#121a2b;padding:15px;border-radius:15px;margin-top:10px;text-align:left;min-height:160px;overflow-y:auto;max-height:220px;}
#restartScreen{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center}
.bigBtn{font-size:28px;padding:20px 50px;background:#e74c3c;width:auto;margin-top:20px;border-radius:15px}
.used{background:gray;cursor:not-allowed}
canvas{background:#222;border-radius:10px;margin-top:10px}
#startBtn{margin-top:20px;background:#3498db;color:white;font-weight:bold;font-size:20px;padding:15px 30px;border-radius:15px;display:block;margin-left:auto;margin-right:auto}
#choices button{font-size:14px;display:block;margin:5px 0;text-align:left}
#cooldownMsg{color:#f39c12;font-weight:bold;margin-top:5px;height:20px}
#liveComments{background:#1c253b;border-radius:10px;padding:10px;flex-grow:1;overflow-y:auto;height:300px;font-size:14px;}
.liveComment{border-bottom:1px solid #2c3e50;padding:5px 0;margin-bottom:3px;}
.red{color:#e74c3c;}
.yellow{color:#f1c40f;}
.green{color:#2ecc71;}
#worldMap{width:100%;height:250px;background:#0d1321;border-radius:10px;position:relative;margin-top:10px;cursor:pointer}
.mapPoint{width:14px;height:14px;border-radius:50%;position:absolute;transition:0.3s;}
.important{border:2px solid #f1c40f;}
</style>
</head>
<body>
<div id="container">
<div id="game">
<h1>‚òéÔ∏è Hotline: Global Chaos Simulator V2.2</h1>
<div>‚è±Ô∏è Time: <span id="time">0</span> s</div>
<div id="bar"><div id="tension"></div></div>
<div id="event" class="card">Press START to begin</div>
<div id="choices"></div>
<div id="cooldownMsg"></div>
<button id="startBtn" onclick="startGame()">START / RESTART</button>
<div id="worldMap"></div>
</div>
<div id="sidePanel">
<button id="abilityBtn" onclick="useAbility()">üßä Emergency De-escalation</button>
<button onclick="startWar()">‚ò¢Ô∏è Start War</button>
<h3>üìä War Odds Live</h3>
<canvas id="oddsChart"></canvas>
<h3>üí¨ Live Comments</h3>
<div id="liveComments"></div>
</div>
<div id="restartScreen">
<h1 id="finalText"></h1>
<button class="bigBtn" onclick="startGame()">RESTART</button>
</div>

<script>
let tension=50,time=0,gameRunning=false,tensionTimer,oddsTimer,buttonCooldown=false,commentsTimer;
let abilityUsed=false,odds=50,lastSituation="",localTension=50;

const ctx=document.getElementById("oddsChart");
const chart=new Chart(ctx,{type:"line",data:{labels:[],datasets:[{label:"Global War Probability %",data:[],borderColor:"yellow",tension:0.3}]},options:{scales:{y:{min:0,max:100}},animation:false}});

const openings=["Breaking:","Urgent:","Live:","Alert:","FLASH:","Exclusive:","Developing:","Emergency:"];
const situations=[
"an unmarked drone spotted over the Gulf","a mysterious explosion in Iran","troops deployed near disputed waters",
"a cyber attack on infrastructure","a missile test surprises analysts","secret backchannel negotiations leak",
"a sanctions package announced","oil tanker caught fire mysteriously","GPS signals went haywire",
"a classified document leaked online","a military convoy blocked","air defense system locked on a jet",
"a cargo ship was hijacked","media claims Iran moved nukes","a protest sparked in Tehran",
"a hacker group posts sensitive data","a sudden blackout in a city","naval exercise turns tense",
"satellite goes offline","a weapons depot accidentally explodes","a spy plane detected",
"an attack on a refinery in Saudi Arabia","demonstrations erupt in Jerusalem",
"Al-Kaiuda claims responsibility for attack","ISXS cells detected in Dubai",
"Faux News reports escalating tension in Yemen","CNE covers missile launch near Israel",
"Neo York Times analyzes political instability in Lebanon","Al-J'Ziza posts live update from Gaza",
"Oil prices spike after tanker incidents","Unknown hackers disable banks in Qatar",
"Israel launches accidental disco ball over Tehran","Saudi Arabia misplaces oil tanker, everyone panics",
"Anonymous hacker posts meme as official threat","Drone mistakes balloon festival for military exercise",
"Sudden TikTok leak increases public panic","Fake peace treaty spreads on social media",
"Unplanned air parade triggers defense lockdown","Intelligence leak confuses advisors",
"Blackout in Riyadh confuses military","Secret peace negotiation leaked on TikTok","Rocket misfires in Gaza",
"Hacker posts fake weather alert in Dubai","Drone parade confuses Israel defense","New viral meme sparks panic"
];
const reactions=[
"Markets crash globally","UN calls emergency meeting","Twitter goes wild",
"News channels switch to red graphics","Airlines reroute flights","Defense stocks surge",
"Journalists shouting questions","Allies demand clarification","The hotline rings nonstop",
"Analysts panic","Cyber experts issue alerts","Governments issue statements",
"Social media is flooded with memes","Experts speculate wildly","Public protests erupt",
"Military advisors whisper frantically","Satellite images are analyzed urgently",
"Intelligence agencies scramble","Warnings issued to diplomats","Intern posts confusing tweet"
];
const advisors=[
"The General: 'We must act immediately.'","The Diplomat: 'Call them. Now.'",
"The Press Secretary: 'No comments!!!'","Intelligence chief looks nervous.",
"An intern whispers: 'This is trending‚Ä¶'","A journalist is live outside.",
"Your allies are texting question marks.","Your phone battery is at 3%!","The Cyber Chief sighs heavily.",
"A rogue analyst tweets nonsense.","The CIA liaison winks.","A drone operator shrugs.",
"Your cabinet argues heatedly.","A military advisor consults maps."
];

const choicePool=[
{t:"Call direct hotline üî•",e:-15},{t:"Send meme diplomacy üü°",e:-10},
{t:"Deploy air defense üî¥",e:15},{t:"Investigate explosion üü¢",e:-8},
{t:"Delay response üî¥",e:7},{t:"Stage photo op üü°",e:-5},
{t:"Leak counter-intelligence üî¥",e:-10},{t:"Deploy humanitarian aid üü¢",e:-8},
{t:"Blame conspiracy theories üü°",e:5},{t:"Launch emergency press conference üî¥",e:12},
{t:"Release drone balloons üü°",e:4},{t:"Backchannel negotiation üî•",e:-12},
{t:"Quietly meet foreign officials üü¢",e:-10},{t:"Send viral meme to calm population üü°",e:-7},
{t:"Meme bomb on social media üü°",e:-8},{t:"Panic Tweet üî¥",e:10}
];

const liveComments=[
{t:"Analyst Joe: 'This is definitely going to escalate!'",c:"red"},
{t:"Market guru: 'Buy defense stocks, lol!'",c:"green"},
{t:"Random Twitter user: 'I told you so ü§¶‚Äç‚ôÇÔ∏è'",c:"green"},
{t:"Citizen X: 'Peace is overrated anyway.'",c:"green"},
{t:"Military Blogger: 'Deploy the pigeons!'",c:"red"},
{t:"Influencer: 'Make memes not war!'",c:"yellow"},
{t:"Satire Channel: 'This is peak chaos content üòÇ'",c:"yellow"},
{t:"Neo York Times commenter: 'This is trending worldwide!'",c:"yellow"},
{t:"Anonymous Hacker: 'Hehe chaos rules!'",c:"green"},
{t:"CNE reporter: 'Can someone explain what‚Äôs happening?'",c:"yellow"},
{t:"Al-J‚ÄôZiza intern: 'Should I even post this?'",c:"yellow"}
];

const mapLocations=[
{country:"Iran",x:300,y:100},{country:"Israel",x:350,y:150},{country:"Saudi Arabia",x:400,y:200},
{country:"Turkey",x:250,y:50},{country:"UAE",x:420,y:180},{country:"Gaza",x:360,y:155}
];

function startGame(){
document.getElementById("restartScreen").style.display="none";
tension=50;time=0;odds=50;abilityUsed=false;gameRunning=true;buttonCooldown=false;localTension=50;
document.getElementById("abilityBtn").disabled=false;document.getElementById("abilityBtn").classList.remove("used");
document.getElementById("cooldownMsg").innerText="";document.getElementById("liveComments").innerHTML="";
chart.data.labels=[];chart.data.datasets[0].data=[];chart.update();
updateBar();nextEvent();updateMap();
clearInterval(tensionTimer);clearInterval(oddsTimer);clearInterval(commentsTimer);
tensionTimer=setInterval(()=>{
time++;document.getElementById("time").innerText=time;
tension+=1+Math.floor(time/20);localTension+=Math.random()*2;
clamp();updateBar();checkGame();
},1000);
oddsTimer=setInterval(updateOdds,1000);
commentsTimer=setInterval(addLiveComment,6000);
setInterval(randomMiniCrisis,15000);
}

function nextEvent(){
if(!gameRunning) return;
let situation; do{situation=situations[Math.floor(Math.random()*situations.length)];}while(situation===lastSituation);
lastSituation=situation;
const text=openings[Math.floor(Math.random()*openings.length)]+" "+situation+".\n"+
reactions[Math.floor(Math.random()*reactions.length)]+".\n\n"+
advisors[Math.floor(Math.random()*advisors.length)];
document.getElementById("event").innerText=text;
const div=document.getElementById("choices");div.innerHTML="";
let shuffled=choicePool.sort(()=>0.5-Math.random()).slice(0,4);
shuffled.forEach(c=>{
const btn=document.createElement("button");btn.innerText=c.t;
if(c.t.includes("üî•")) btn.classList.add("important");
btn.onclick=()=>{
if(!gameRunning||buttonCooldown) return;
buttonCooldown=true;document.getElementById("cooldownMsg").innerText="Cooldown...";
setTimeout(()=>{buttonCooldown=false;document.getElementById("cooldownMsg").innerText="";},1200);
let randomFactor=Math.floor(Math.random()*10)-5;
tension+=c.e+randomFactor;localTension+=Math.floor(Math.random()*5);
clamp();updateBar();checkGame();nextEvent();updateMap();
};
div.appendChild(btn);
});
}

function useAbility(){if(!gameRunning||abilityUsed) return;
tension-=25;localTension-=15;abilityUsed=true;
document.getElementById("abilityBtn").disabled=true;document.getElementById("abilityBtn").classList.add("used");
clamp();updateBar();
}

function startWar(){if(!gameRunning) return;endGame("‚ò¢Ô∏è You started the war.");}

function updateOdds(){
odds+=Math.random()*10-5+((tension-50)/20);if(odds<0)odds=0;if(odds>100)odds=100;
chart.data.labels.push("");chart.data.datasets[0].data.push(odds);
if(chart.data.labels.length>20){chart.data.labels.shift();chart.data.datasets[0].data.shift();}
chart.update();
}

function addLiveComment(){
if(!gameRunning) return;
const c=liveComments[Math.floor(Math.random()*liveComments.length)];
const div=document.getElementById("liveComments");
const p=document.createElement("div");p.className="liveComment "+c.c;p.innerText=c.t;
div.appendChild(p);
if(div.children.length>10) div.removeChild(div.children[0]);
div.scrollTop=div.scrollHeight;
}

function randomMiniCrisis(){
if(!gameRunning) return;
const events=[
"üö® Missile detected! Choose action fast!","üí£ Hacker group posts sensitive meme!","üî• Mysterious explosion in neighboring country!"];
const e=events[Math.floor(Math.random()*events.length)];
alert(e);
}

function clamp(){if(tension<0)tension=0;if(tension>100)tension=100;if(localTension<0)localTension=0;if(localTension>100)localTension=100;}
function updateBar(){
document.getElementById("tension").style.width=tension+"%";
if(tension<30) color("#2ecc71"); else if(tension<70) color("orange"); else color("red");
}
function color(c){document.getElementById("tension").style.background=c;}
function checkGame(){
if(tension>=100) endGame("üí• Crisis Escalated");
if(tension<=0) endGame("üïäÔ∏è Historic Peace Deal");
}
function endGame(text){
gameRunning=false;clearInterval(tensionTimer);clearInterval(oddsTimer);clearInterval(commentsTimer);
document.getElementById("finalText").innerText=text+"\nYou lasted "+time+" seconds";
document.getElementById("restartScreen").style.display="flex";
}

function updateMap(){
const map=document.getElementById("worldMap");map.innerHTML="";
mapLocations.forEach(loc=>{
const point=document.createElement("div");point.className="mapPoint red";
point.style.left=loc.x+"px";point.style.top=loc.y+"px";
point.title=loc.country+" ‚Äì Click for event";
point.onclick=()=>{if(!gameRunning) return;alert("Event in "+loc.country+"! Investigate wisely.");};
map.appendChild(point);
});
}
</script>
</body>
</html>
